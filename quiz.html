<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quizzes - IDEA VAULT CLUB</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <img src="images/logo.png" alt="IDEA VAULT CLUB Logo" class="logo-nav">
        <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="courses.html">Courses</a></li>
            <li><a href="leaderboard.html">Leaderboard</a></li>
            <li><a href="ip_tool.html">IP Tool</a></li>
            <li><a href="profile.html">Profile</a></li>
        </ul>
    </nav>

    <!-- Quiz Section -->
    <section class="quiz-section">
        <h1>Quizzes</h1>
        <div id="quiz-container">
            <p id="question"></p>
            <div class="options">
                <button class="option-btn" data-option="a" id="optA"></button>
                <button class="option-btn" data-option="b" id="optB"></button>
                <button class="option-btn" data-option="c" id="optC"></button>
                <button class="option-btn" data-option="d" id="optD"></button>
            </div>
            <p id="timer"></p>
        </div>
    </section>

    <script src="js/main.js"></script>
    <script>
        // CHECK LOGIN
        let currentUser = JSON.parse(localStorage.getItem('ivc_current_user'));
        if(!currentUser){
            alert('Please login first!');
            window.location.href = 'login.html';
        }

        // SAMPLE QUIZZES
        let quizzes = [
            {
                question: "What is a trademark?",
                a: "A type of patent",
                b: "A symbol, word or phrase identifying a business",
                c: "A copyright",
                d: "A trade secret",
                correct: "b"
            },
            {
                question: "Which of the following can be copyrighted?",
                a: "Inventions",
                b: "Books and music",
                c: "Business names",
                d: "Logos",
                correct: "b"
            },
            {
                question: "IP stands for?",
                a: "Intellectual Property",
                b: "International Policy",
                c: "Internal Process",
                d: "Investment Plan",
                correct: "a"
            }
        ];

        let currentIndex = 0;
        let score = currentUser.score || 0;
        let timeLeft = 15; // 15 seconds per question
        let timerId;

        const questionEl = document.getElementById('question');
        const optA = document.getElementById('optA');
        const optB = document.getElementById('optB');
        const optC = document.getElementById('optC');
        const optD = document.getElementById('optD');
        const timerEl = document.getElementById('timer');

        function loadQuestion(){
            if(currentIndex >= quizzes.length){
                alert('Quiz finished! Your score: ' + score);
                currentUser.score = score;
                let users = JSON.parse(localStorage.getItem('ivc_members')) || [];
                let idx = users.findIndex(u => u.email === currentUser.email);
                if(idx !== -1){
                    users[idx].score = score;
                    localStorage.setItem('ivc_members', JSON.stringify(users));
                }
                localStorage.setItem('ivc_current_user', JSON.stringify(currentUser));
                window.location.href = 'profile.html';
                return;
            }

            let q = quizzes[currentIndex];
            questionEl.textContent = q.question;
            optA.textContent = q.a;
            optB.textContent = q.b;
            optC.textContent = q.c;
            optD.textContent = q.d;
            timeLeft = 15;
            timerEl.textContent = "Time left: " + timeLeft + "s";

            clearInterval(timerId);
            timerId = setInterval(() => {
                timeLeft--;
                timerEl.textContent = "Time left: " + timeLeft + "s";
                if(timeLeft <= 0){
                    clearInterval(timerId);
                    currentIndex++;
                    loadQuestion();
                }
            }, 1000);
        }

        document.querySelectorAll('.option-btn').forEach(btn => {
            btn.addEventListener('click', function(){
                clearInterval(timerId);
                let selected = this.getAttribute('data-option');
                if(selected === quizzes[currentIndex].correct){
                    score += 10; // correct answer gives 10 points
                }
                currentIndex++;
                loadQuestion();
            });
        });

        // Start quiz
        loadQuestion();
    </script>
</body>
</html>
